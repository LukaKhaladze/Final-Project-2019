<!DOCTYPE html>
<!-- saved from url=(0162)https://2350374494.webagent.mail.ru/webim/agent/rpc.html?usedBranch=master&path=webim%2Fagent%2Frelease%2F501&xdm_e=https%3A%2F%2Fe.mail.ru&xdm_c=default0&xdm_p=1 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=8">
        
        <script type="text/javascript">
            window.wa_ts1 = +new Date();

            function parseGet () {
                var request = {};
                var params = (''+document.location).match(/[^?#]+/g);
                params.shift();
                params.join('&').replace(/([^&=]+)=([^&]+)/g, function (nope, key, value) {
                    value = decodeURIComponent(value);
                    request[key] = value;
                });
                return request;
            }

            function parseTmpl () {
                var args = Array.prototype.slice.call(arguments, 0);
                var format = args.shift();
                return format.replace(/\{(\d+)\}/g, function (ignored, i) {
                    return args[i];
                });
            }

            function stripAll (str) {
                return (str || '').replace(/[^a-z0-9-_]+/g, '');
            }

            function stripPath (str) {
                return (str || '').replace(/[^a-z0-9-_\/]+/g, '');
            }


            (function () {
                var get = parseGet();
                
                var subdomain = 'img', domain = 'imgs';
                if ( get.server == 'localhost' && get.branch == 'webagent' ) {
                    subdomain = get.branch;
                    domain = 'localhost.';
                } else if (!get.path.match(/^webim\/agent\/(?:release\/\d+|build\/[a-zA-Z0-9_\-]+)$/)) {
                    return false;
                }

                var url = parseTmpl(
                    '//{0}.{1}mail.ru/{2}/rpc.js?{3}',
                    subdomain,
                    domain,
                    stripPath(get.path || 'webim/agent/build'),
                    stripAll(get.build || '')
                );

                document.write('<scr' + 'ipt type="text/javascript" src="' + url + '"></scr' + 'ipt>');
            })();

        </script><script type="text/javascript" src="./rpc.js.download"></script>
    </head>
    <body>
        <script type="text/javascript">
            if (window.easyXDM) {
                try {
                    var WebAgentRpc = new easyXDM.Rpc({
                        acl: window.webAgentWhiteListDomains
                    }, {

                        local: {

                            invoke: function (options, successFn, errorFn) {
                                return WebAgent.rpc.Remote.invoke(WebAgentRpc, options, successFn, errorFn);
                            }

                        },

                        remote: {

                            invoke: {}

                        }

                    });
                } catch(err) {
                    WebAgent.util.Mnt.catchException(err);
                }
            }

        </script>
    


</body></html>